/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MainAPIR
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  URL: "https://jsonplaceholder.typicode.com/todos/1",
  FormatOut: "json",
  MethodRequest: "GET",
  DataRequest: "",
  HeaderRequest: '{"Content-Type": "application/json"}',
  DataResponse: "",
  URLs: [],
  Name: ""
};
function nestedValue(data, key) {
  const keySplit = key.split("->").map((item) => item.trim());
  var value = "";
  for (let i = 0; i < keySplit.length; i++) {
    if (i === 0) {
      value = data.json[keySplit[i]];
    } else {
      value = value[keySplit[i]];
    }
  }
  return value;
}
function toDocument(app, settings, editor) {
  const selection = editor.getSelection();
  const r = {
    url: settings.URL,
    method: settings.MethodRequest,
    body: selection
  };
  if (!r.body) {
    r.method = "POST";
    r.body = '{"args":[]}';
  }
  requestUrl(r).then((data) => {
    var _a;
    if (settings.DataResponse !== "") {
      const DataResponseArray = settings.DataResponse.split(",");
      for (let i = 0; i < DataResponseArray.length; i++) {
        const key = DataResponseArray[i].trim();
        var value = JSON.stringify(data.json[key]);
        if (key.includes("->")) {
          value = nestedValue(data, key);
        }
        if (settings.FormatOut === "variable") {
          value = JSON.stringify(value);
          editor.replaceSelection(`${key.split("->").pop()} : ${value}
`);
        }
        if (settings.FormatOut === "json") {
          if (key.includes("->")) {
            value = JSON.stringify(value);
          }
          editor.replaceSelection(`\`\`\`json
${key.split("->").pop()} : ${value}
\`\`\`

`);
        }
      }
    } else {
      if (settings.FormatOut === "variable") {
        const response = data.json;
        if (!((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.success)) {
          new import_obsidian.Notice("Server response error");
        }
        const responseData = response.data;
        editor.insertText(responseData.content);
        const file = editor.getDoc().editorComponent.file;
        const path = file.parent.path;
        const vault = file.vault;
        const promiseAll = [];
        let createCount = 0;
        let modifyCount = 0;
        Object.keys(responseData.files).forEach((key) => {
          const targetFile = vault.getAbstractFileByPath(path + "/" + key + ".md");
          if (targetFile) {
            promiseAll.push(vault.modify(targetFile, responseData.files[key], {}));
            modifyCount++;
          } else {
            promiseAll.push(vault.create(path + "/" + key + ".md", responseData.files[key], {}));
            createCount++;
          }
        });
        Promise.all(promiseAll).then((res) => {
          new import_obsidian.Notice("\u5168\u90E8\u5199\u5165\u6210\u529F, \u4E00\u5171" + res.length + "\u4E2A\u6587\u4EF6, \u65B0\u5EFA" + createCount + "\u4E2A, \u4FEE\u6539" + modifyCount + "\u4E2A");
        }).catch((e) => {
          new import_obsidian.Notice("Error: " + e.message);
        });
      }
      if (settings.FormatOut === "json") {
        editor.replaceSelection(`\`\`\`json
${JSON.stringify(data.json)}
\`\`\`
`);
      }
    }
  }).catch((error) => {
    console.error(error);
  });
}
var MainAPIR = class extends import_obsidian.Plugin {
  async onload() {
    await this.loadSettings();
    this.addCommand({
      id: "show-response-in-modal",
      name: "Show response in Modal",
      callback: () => {
        new ShowOutputModal(this.app, this.settings.URL, this.settings.MethodRequest, this.settings.DataRequest, this.settings.HeaderRequest, this.settings.DataResponse).open();
      }
    });
    try {
      this.registerMarkdownCodeBlockProcessor("req", async (source, el, ctx) => {
        const sourceLines = source.split("\n");
        let method = "GET";
        let allowedMethods = ["GET", "POST", "PUT", "DELETE"];
        let URL = "";
        let show = "";
        let header = {};
        let body = {};
        let format = "{}";
        let responseType = "json";
        for (const line of sourceLines) {
          let lowercaseLine = line.toLowerCase();
          switch (true) {
            case lowercaseLine.includes("method: "):
              method = line.replace(/method: /i, "").toUpperCase();
              if (!allowedMethods.includes(method.toUpperCase())) {
                el.innerHTML = "Error: Method " + method + " not supported";
                return;
              }
              break;
            case lowercaseLine.includes("url: "):
              URL = line.replace(/url: /i, "");
              break;
            case lowercaseLine.includes("response-type"):
              responseType = line.replace(/response-type: /i, "").toLowerCase();
              const allowedResponseTypes = ["json", "txt", "md"];
              if (!allowedResponseTypes.includes(responseType)) {
                el.innerHTML = "Error: Response type " + responseType + " not supported";
                return;
              }
              break;
            case lowercaseLine.includes("show: "):
              show = line.replace(/show: /i, "");
              break;
            case lowercaseLine.includes("header: "):
              header = JSON.parse(line.replace(/header: /i, ""));
              break;
            case lowercaseLine.includes("body: "):
              body = line.replace(/body: /i, "");
              break;
            case lowercaseLine.includes("format: "):
              format = line.replace(/format: /i, "");
              if (!format.includes("{}")) {
                el.innerHTML = "Error: Use {} to show response in the document.";
                return;
              }
              break;
          }
          if (URL === "") {
            el.innerHTML = "Error: URL not found";
            return;
          }
        }
        try {
          const formatSplit = format.split("{}");
          let responseData;
          if (method !== "GET") {
            responseData = await requestUrl({ url: URL, method, header, body });
          } else {
            responseData = await requestUrl({ url: URL, method });
          }
          if (responseType !== "json") {
            el.innerHTML = formatSplit[0] + responseData.text + formatSplit[1];
          } else if (!show) {
            el.innerHTML = formatSplit[0] + JSON.stringify(responseData.json, null) + formatSplit[1];
          } else {
            let nesData = show.includes("->") ? nestedValue(responseData, show) : responseData.json[show];
            if (typeof nesData === "object") {
              nesData = JSON.stringify(nesData);
            } else if (typeof nesData === "string") {
              nesData = nesData.replace(/"/g, "");
            }
            el.innerHTML = formatSplit[0] + nesData + formatSplit[1];
          }
        } catch (error) {
          console.error(error);
          el.innerHTML = "Error: " + error.message;
        }
      });
    } catch (e) {
      console.error(e.message);
    }
    this.registerMarkdownCodeBlockProcessor("beanSchema", async (source, el, ctx) => {
      let parameters = null;
      try {
        parameters = JSON.parse(source);
      } catch (e) {
        el.createEl("h3", { text: "BPMN parameters invalid: \n" + e.message });
        return;
      }
      const sb = [
        '<ul class="has-list-bullet">'
      ];
      function addItem(idx, key, type, title, desc) {
        key = htmlEncode(key);
        type = htmlEncode(type);
        title = htmlEncode(title);
        desc = htmlEncode(desc);
        sb.push(`<li data-line="${idx}"><div class="list-bullet"></div>${key} <code>${type}</code> <strong>${title}</strong>${desc}</li>`);
      }
      function buildProp(level, sec) {
        if (sec.valueType === "object") {
          Object.keys(sec.properties).forEach((key, idx) => {
            const value = sec.properties[key];
            if (value.valueType === "object") {
              sb.push(`<li data-line="${idx}"><div class="list-bullet"></div><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
									${htmlEncode(key)}<code>object</code><ul class="has-list-bullet">`);
              buildProp(level + 1, value);
              sb.push(`</ul></li>`);
            } else if (value.valueType === "array") {
              sb.push(`<li data-line="${idx}"><div class="list-bullet"></div><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>
									${htmlEncode(key)}<code>array</code><ul class="has-list-bullet">`);
              buildProp(level + 1, value.items);
              sb.push(`</ul></li>`);
            } else {
              addItem(idx, key, value.valueType, value.title, value.desc);
            }
          });
        } else if (sec.valueType === "array") {
          buildProp(level, sec.items);
        } else {
        }
      }
      buildProp(0, parameters.root);
      sb.push("</ul>");
      const html = sb.join("\n");
      el.innerHTML = html;
    });
    this.addCommand({
      id: "response-in-document",
      name: "Paste response in current document",
      editorCallback: (editor, view) => {
        toDocument(this.app, this.settings, editor);
      }
    });
    for (let i = 0; i < this.settings.URLs.length; i++) {
      this.addCommand({
        id: "response-in-document-" + this.settings.URLs[i].Name,
        name: "Response for api: " + this.settings.URLs[i].Name,
        editorCallback: (editor, view) => {
          const rea = this.settings.URLs[i];
          toDocument(this.app, rea, editor);
        }
      });
    }
    this.addSettingTab(new APRSettings(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
var ShowOutputModal = class extends import_obsidian.Modal {
  constructor(app, URL, MethodRequest, DataRequest, HeaderRequest, DataResponse) {
    super(app);
    this.props = {
      URL,
      MethodRequest,
      DataRequest,
      HeaderRequest,
      DataResponse
    };
  }
  onOpen() {
    const { contentEl } = this;
    const { URL, MethodRequest, DataRequest, HeaderRequest, DataResponse } = this.props;
    console.log(HeaderRequest);
    if (MethodRequest === "GET") {
      requestUrl({
        url: URL,
        method: MethodRequest,
        headers: JSON.parse(HeaderRequest)
      }).then((data) => {
        if (DataResponse !== "") {
          const DataResponseArray = DataResponse.split(",");
          for (let i = 0; i < DataResponseArray.length; i++) {
            if (DataResponseArray[i].includes("->")) {
              contentEl.createEl("b", { text: DataResponseArray[i] + ` : ${JSON.stringify(nestedValue(data, DataResponseArray[i]))}` });
            } else {
              contentEl.createEl("b", { text: DataResponseArray[i] + ` : ${JSON.stringify(data.json[DataResponseArray[i]])}` });
            }
          }
        } else {
          contentEl.createEl("b", { text: `${JSON.stringify(data.json)}` });
        }
      }).catch((error) => {
        console.error(error);
        contentEl.createEl("b", { text: "Error: " + error.message });
      });
    } else {
      requestUrl({
        url: URL,
        method: MethodRequest,
        headers: JSON.parse(HeaderRequest),
        body: DataRequest
      }).then((data) => {
        if (DataResponse !== "") {
          const DataResponseArray = DataResponse.split(",");
          for (let i = 0; i < DataResponseArray.length; i++) {
            contentEl.createEl("b", { text: DataResponseArray[i] + ` : ${JSON.stringify(data.json[DataResponseArray[i]])}` });
          }
        } else {
          contentEl.createEl("b", { text: `${JSON.stringify(data.json)}` });
        }
      }).catch((error) => {
        console.error(error);
        contentEl.createEl("b", { text: "Error: " + error.message });
      });
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var APRSettings = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    this.displayAddedURLs(containerEl);
    new import_obsidian.Setting(containerEl).setName("Name").setDesc("Name of the request").addText((text) => text.setPlaceholder("Name").setValue(this.plugin.settings.Name).onChange(async (value) => {
      if (value !== "") {
        this.plugin.settings.Name = value;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian.Setting(containerEl).setName("URL").setDesc("Endpoint to fetch data from").addText((text) => text.setPlaceholder("URL").setValue(this.plugin.settings.URL).onChange(async (value) => {
      this.plugin.settings.URL = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Response format").setDesc("Select the desired response format: JSON (as a code block) or Variable (using '::')").addDropdown((dropDown) => {
      dropDown.addOption("json", "JSON");
      dropDown.addOption("variable", "Variable");
      dropDown.setValue(this.plugin.settings.FormatOut);
      dropDown.onChange(async (value) => {
        this.plugin.settings.FormatOut = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Request method").setDesc("Select the desired request method").addDropdown((dropDown) => {
      dropDown.addOption("GET", "GET");
      dropDown.addOption("POST", "POST");
      dropDown.addOption("POST", "PUT");
      dropDown.addOption("DELETE", "DELETE");
      dropDown.setValue(this.plugin.settings.MethodRequest);
      dropDown.onChange(async (value) => {
        this.plugin.settings.MethodRequest = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Data to send").setDesc("Data to send in the request").addTextArea((text) => text.setPlaceholder('{"data":"data"}').setValue(this.plugin.settings.DataRequest).onChange(async (value) => {
      this.plugin.settings.DataRequest = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Headers").setDesc("Headers to send in the request").addTextArea((text) => text.setPlaceholder('{"Content-Type": "application/json"}').setValue(this.plugin.settings.HeaderRequest).onChange(async (value) => {
      this.plugin.settings.HeaderRequest = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Data to show in modal").setDesc("Write the name of the variable to show in the modal (space by comma)").addTextArea((text) => text.setPlaceholder("Variable Name").setValue(this.plugin.settings.DataResponse).onChange(async (value) => {
      this.plugin.settings.DataResponse = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).addButton((button) => {
      button.setClass("mod-cta");
      button.setButtonText("Add this APIR").onClick(async () => {
        const { Name } = this.plugin.settings;
        if (Name === "") {
          new import_obsidian.Notice("Name is empty");
          return;
        }
        const {
          URL,
          FormatOut,
          MethodRequest,
          DataResponse,
          DataRequest,
          HeaderRequest
        } = this.plugin.settings;
        const { URLs } = this.plugin.settings;
        URLs.push({
          "URL": URL,
          "Name": Name,
          "FormatOut": FormatOut,
          "MethodRequest": MethodRequest,
          "DataRequest": DataRequest,
          "HeaderRequest": HeaderRequest,
          "DataResponse": DataResponse
        });
        await this.plugin.saveSettings();
        this.display();
        this.plugin.addCommand({
          id: "response-in-document-" + Name,
          name: "Response for api: " + Name,
          editorCallback: (editor, view) => {
            const rea = URLs[URLs.length - 1];
            toDocument(this.app, rea, editor);
          }
        });
      });
    });
  }
  displayAddedURLs(containerEl) {
    const { URLs } = this.plugin.settings;
    if (URLs.length > 0) {
      containerEl.createEl("p", { text: "Added APIs:" });
      const urlsList = containerEl.createEl("ul");
      URLs.forEach((url) => {
        const urlItem = urlsList.createEl("li");
        urlItem.createEl("code", { text: url.Name + " : " });
        urlItem.createEl("a", { text: url.URL, href: url.URL });
        urlItem.createEl("code", { text: " || " });
        const removeButton = urlItem.createEl("button", {
          text: "\u274C"
        });
        removeButton.addEventListener("click", async () => {
          const index = URLs.indexOf(url);
          URLs.splice(index, 1);
          await this.plugin.saveSettings();
          this.display();
        });
      });
    }
  }
};
function htmlEncode(input) {
  if (!input) {
    return "";
  }
  return input.replace(/[&<>"']/g, function(match) {
    switch (match) {
      case "&":
        return "&amp;";
      case "<":
        return "&lt;";
      case ">":
        return "&gt;";
      case '"':
        return "&quot;";
      case "'":
        return "&#39;";
    }
  });
}
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBNb2RhbCwgUGx1Z2luLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBURmlsZSwgTm90aWNlLCBWYXVsdH0gZnJvbSAnb2JzaWRpYW4nO1xuXG5pbnRlcmZhY2UgTG9hZEFQSVJTZXR0aW5ncyB7XG5cdFVSTDogc3RyaW5nO1xuXHRGb3JtYXRPdXQ6IHN0cmluZztcblx0TWV0aG9kUmVxdWVzdDogc3RyaW5nO1xuXHREYXRhUmVxdWVzdDogc3RyaW5nO1xuXHRIZWFkZXJSZXF1ZXN0OiBzdHJpbmc7XG5cdERhdGFSZXNwb25zZTogc3RyaW5nO1xuXHRVUkxzOiBzdHJpbmdbXTtcblx0TmFtZTogc3RyaW5nO1xufVxuXG5jb25zdCBERUZBVUxUX1NFVFRJTkdTOiBMb2FkQVBJUlNldHRpbmdzID0ge1xuXHRVUkw6ICdodHRwczovL2pzb25wbGFjZWhvbGRlci50eXBpY29kZS5jb20vdG9kb3MvMScsXG5cdEZvcm1hdE91dDogJ2pzb24nLFxuXHRNZXRob2RSZXF1ZXN0OiAnR0VUJyxcblx0RGF0YVJlcXVlc3Q6ICcnLFxuXHRIZWFkZXJSZXF1ZXN0OiAne1wiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwifScsXG5cdERhdGFSZXNwb25zZTogJycsXG5cdFVSTHM6IFtdLFxuXHROYW1lOiAnJyxcbn1cblxuZnVuY3Rpb24gbmVzdGVkVmFsdWUoZGF0YTogYW55LCBrZXk6IHN0cmluZykge1xuXHRjb25zdCBrZXlTcGxpdDogc3RyaW5nW10gPSBrZXkuc3BsaXQoXCItPlwiKS5tYXAoKGl0ZW0pID0+IGl0ZW0udHJpbSgpKTtcblx0dmFyIHZhbHVlOiBhbnkgPSBcIlwiO1xuXHRmb3IgKGxldCBpOiBudW1iZXIgPSAwOyBpIDwga2V5U3BsaXQubGVuZ3RoOyBpKyspIHtcblx0XHRpZiAoaSA9PT0gMCkge1xuXHRcdFx0dmFsdWUgPSBkYXRhLmpzb25ba2V5U3BsaXRbaV1dO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR2YWx1ZSA9IHZhbHVlW2tleVNwbGl0W2ldXTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5mdW5jdGlvbiB0b0RvY3VtZW50KGFwcDogQXBwLCBzZXR0aW5nczogYW55LCBlZGl0b3I6IEVkaXRvcikge1xuXHRjb25zdCBzZWxlY3Rpb24gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uKClcblx0Y29uc3QgciA9IHtcblx0XHR1cmw6IHNldHRpbmdzLlVSTCxcblx0XHRtZXRob2Q6IHNldHRpbmdzLk1ldGhvZFJlcXVlc3QsXG5cdFx0Ym9keTogc2VsZWN0aW9uXG5cdH1cblx0aWYgKCFyLmJvZHkpIHtcblx0XHRyLm1ldGhvZCA9ICdQT1NUJztcblx0XHRyLmJvZHkgPSAne1wiYXJnc1wiOltdfSc7XG5cdH1cblx0cmVxdWVzdFVybChyKS50aGVuKChkYXRhOiBKU09OKSA9PiB7XG5cdFx0aWYgKHNldHRpbmdzLkRhdGFSZXNwb25zZSAhPT0gXCJcIikge1xuXHRcdFx0Y29uc3QgRGF0YVJlc3BvbnNlQXJyYXkgPSBzZXR0aW5ncy5EYXRhUmVzcG9uc2Uuc3BsaXQoXCIsXCIpO1xuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBEYXRhUmVzcG9uc2VBcnJheS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBrZXkgPSBEYXRhUmVzcG9uc2VBcnJheVtpXS50cmltKCk7XG5cblx0XHRcdFx0dmFyIHZhbHVlID0gSlNPTi5zdHJpbmdpZnkoZGF0YS5qc29uW2tleV0pO1xuXG5cdFx0XHRcdGlmIChrZXkuaW5jbHVkZXMoXCItPlwiKSkge1xuXHRcdFx0XHRcdHZhbHVlID0gbmVzdGVkVmFsdWUoZGF0YSwga2V5KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChzZXR0aW5ncy5Gb3JtYXRPdXQgPT09IFwidmFyaWFibGVcIikge1xuXHRcdFx0XHRcdHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHRcdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKGAke2tleS5zcGxpdChcIi0+XCIpLnBvcCgpfSA6ICR7dmFsdWV9XFxuYCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHNldHRpbmdzLkZvcm1hdE91dCA9PT0gXCJqc29uXCIpIHtcblx0XHRcdFx0XHRpZiAoa2V5LmluY2x1ZGVzKFwiLT5cIikpIHtcblx0XHRcdFx0XHRcdHZhbHVlID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihcImBgYGpzb25cXG5cIiArIGAke2tleS5zcGxpdChcIi0+XCIpLnBvcCgpfSA6ICR7dmFsdWV9XFxuYCArIFwiYGBgXFxuXFxuXCIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChzZXR0aW5ncy5Gb3JtYXRPdXQgPT09IFwidmFyaWFibGVcIikge1xuXHRcdFx0XHQvLyBlZGl0b3IucmVwbGFjZVNlbGVjdGlvbihgJHtKU09OLnN0cmluZ2lmeShkYXRhLmpzb24pfVxcbmApO1xuXHRcdFx0XHRjb25zdCByZXNwb25zZSA9IGRhdGEuanNvblxuXHRcdFx0XHRpZiAoIXJlc3BvbnNlPy5kYXRhPy5zdWNjZXNzKSB7XG5cdFx0XHRcdFx0bmV3IE5vdGljZShcIlNlcnZlciByZXNwb25zZSBlcnJvclwiKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IHJlc3BvbnNlRGF0YSA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdGVkaXRvci5pbnNlcnRUZXh0KHJlc3BvbnNlRGF0YS5jb250ZW50KTtcblxuXHRcdFx0XHRjb25zdCBmaWxlOiBURmlsZSA9IGVkaXRvci5nZXREb2MoKS5lZGl0b3JDb21wb25lbnQuZmlsZVxuXHRcdFx0XHRjb25zdCBwYXRoOiBzdHJpbmcgPSBmaWxlLnBhcmVudC5wYXRoO1xuXHRcdFx0XHRjb25zdCB2YXVsdDogVmF1bHQgPSBmaWxlLnZhdWx0O1xuXHRcdFx0XHQvLyBjb25zdCBmb2xkZXI6IFRGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgocGF0aCk7XG5cdFx0XHRcdGNvbnN0IHByb21pc2VBbGw6IFByb21pc2U8YW55PltdID0gW107XG5cdFx0XHRcdGxldCBjcmVhdGVDb3VudCA9IDA7XG5cdFx0XHRcdGxldCBtb2RpZnlDb3VudCA9IDA7XG5cdFx0XHRcdE9iamVjdC5rZXlzKHJlc3BvbnNlRGF0YS5maWxlcykuZm9yRWFjaCgoa2V5KSA9PiB7XG5cdFx0XHRcdFx0Y29uc3QgdGFyZ2V0RmlsZSA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoICsgJy8nICsga2V5ICsgJy5tZCcpXG5cdFx0XHRcdFx0aWYgKHRhcmdldEZpbGUpIHtcblx0XHRcdFx0XHRcdC8vIFx1NjU4N1x1NEVGNlx1NURGMlx1NUI1OFx1NTcyOFxuXHRcdFx0XHRcdFx0cHJvbWlzZUFsbC5wdXNoKHZhdWx0Lm1vZGlmeSh0YXJnZXRGaWxlLCByZXNwb25zZURhdGEuZmlsZXNba2V5XSwge30pKTtcblx0XHRcdFx0XHRcdG1vZGlmeUNvdW50Kys7XG5cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Ly8gXHU2NTg3XHU0RUY2XHU0RTBEXHU1QjU4XHU1NzI4XG5cdFx0XHRcdFx0XHRwcm9taXNlQWxsLnB1c2godmF1bHQuY3JlYXRlKHBhdGggKyAnLycgKyBrZXkgKyAnLm1kJywgcmVzcG9uc2VEYXRhLmZpbGVzW2tleV0sIHt9KSk7XG5cdFx0XHRcdFx0XHRjcmVhdGVDb3VudCsrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblxuXHRcdFx0XHRQcm9taXNlLmFsbChwcm9taXNlQWxsKS50aGVuKChyZXMpID0+IHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiXHU1MTY4XHU5MEU4XHU1MTk5XHU1MTY1XHU2MjEwXHU1MjlGLCBcdTRFMDBcdTUxNzFcIiArIHJlcy5sZW5ndGggKyBcIlx1NEUyQVx1NjU4N1x1NEVGNiwgXHU2NUIwXHU1RUZBXCIgKyBjcmVhdGVDb3VudCArIFwiXHU0RTJBLCBcdTRGRUVcdTY1MzlcIiArIG1vZGlmeUNvdW50ICsgXCJcdTRFMkFcIik7XG5cblx0XHRcdFx0fSkuY2F0Y2goKGUpID0+IHtcblx0XHRcdFx0XHRuZXcgTm90aWNlKFwiRXJyb3I6IFwiICsgZS5tZXNzYWdlKTtcblx0XHRcdFx0fSlcblx0XHRcdH1cblx0XHRcdGlmIChzZXR0aW5ncy5Gb3JtYXRPdXQgPT09IFwianNvblwiKSB7XG5cdFx0XHRcdGVkaXRvci5yZXBsYWNlU2VsZWN0aW9uKFwiYGBganNvblxcblwiICsgYCR7SlNPTi5zdHJpbmdpZnkoZGF0YS5qc29uKX1cXG5gICsgXCJgYGBcXG5cIik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9KVxuXHRcdC5jYXRjaCgoZXJyb3I6IEVycm9yKSA9PiB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHR9KTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTWFpbkFQSVIgZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogTG9hZEFQSVJTZXR0aW5ncztcblxuXHRhc3luYyBvbmxvYWQoKSB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ3Nob3ctcmVzcG9uc2UtaW4tbW9kYWwnLFxuXHRcdFx0bmFtZTogJ1Nob3cgcmVzcG9uc2UgaW4gTW9kYWwnLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0bmV3IFNob3dPdXRwdXRNb2RhbCh0aGlzLmFwcCwgdGhpcy5zZXR0aW5ncy5VUkwsIHRoaXMuc2V0dGluZ3MuTWV0aG9kUmVxdWVzdCwgdGhpcy5zZXR0aW5ncy5EYXRhUmVxdWVzdCwgdGhpcy5zZXR0aW5ncy5IZWFkZXJSZXF1ZXN0LCB0aGlzLnNldHRpbmdzLkRhdGFSZXNwb25zZSkub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0dHJ5IHtcblx0XHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcInJlcVwiLCBhc3luYyAoc291cmNlLCBlbCwgY3R4KSA9PiB7XG5cdFx0XHRcdGNvbnN0IHNvdXJjZUxpbmVzID0gc291cmNlLnNwbGl0KFwiXFxuXCIpO1xuXG5cdFx0XHRcdGxldCBtZXRob2Q6IHN0cmluZyA9IFwiR0VUXCI7XG5cdFx0XHRcdGxldCBhbGxvd2VkTWV0aG9kczogc3RyaW5nW10gPSBbXCJHRVRcIiwgXCJQT1NUXCIsIFwiUFVUXCIsIFwiREVMRVRFXCJdO1xuXHRcdFx0XHRsZXQgVVJMOiBzdHJpbmcgPSBcIlwiO1xuXHRcdFx0XHRsZXQgc2hvdzogc3RyaW5nID0gXCJcIjtcblx0XHRcdFx0bGV0IGhlYWRlcjogYW55ID0ge307XG5cdFx0XHRcdGxldCBib2R5OiBhbnkgPSB7fTtcblx0XHRcdFx0bGV0IGZvcm1hdDogc3RyaW5nID0gXCJ7fVwiO1xuXHRcdFx0XHRsZXQgcmVzcG9uc2VUeXBlOiBzdHJpbmcgPSBcImpzb25cIjtcblxuXHRcdFx0XHRmb3IgKGNvbnN0IGxpbmUgb2Ygc291cmNlTGluZXMpIHtcblx0XHRcdFx0XHRsZXQgbG93ZXJjYXNlTGluZSA9IGxpbmUudG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0XHRcdHN3aXRjaCAodHJ1ZSkge1xuXHRcdFx0XHRcdFx0Y2FzZSBsb3dlcmNhc2VMaW5lLmluY2x1ZGVzKFwibWV0aG9kOiBcIik6XG5cdFx0XHRcdFx0XHRcdG1ldGhvZCA9IGxpbmUucmVwbGFjZSgvbWV0aG9kOiAvaSwgXCJcIikudG9VcHBlckNhc2UoKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFhbGxvd2VkTWV0aG9kcy5pbmNsdWRlcyhtZXRob2QudG9VcHBlckNhc2UoKSkpIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5pbm5lckhUTUwgPSBcIkVycm9yOiBNZXRob2QgXCIgKyBtZXRob2QgKyBcIiBub3Qgc3VwcG9ydGVkXCI7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlIGxvd2VyY2FzZUxpbmUuaW5jbHVkZXMoXCJ1cmw6IFwiKTpcblx0XHRcdFx0XHRcdFx0VVJMID0gbGluZS5yZXBsYWNlKC91cmw6IC9pLCBcIlwiKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgbG93ZXJjYXNlTGluZS5pbmNsdWRlcyhcInJlc3BvbnNlLXR5cGVcIik6XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlVHlwZSA9IGxpbmUucmVwbGFjZSgvcmVzcG9uc2UtdHlwZTogL2ksIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IGFsbG93ZWRSZXNwb25zZVR5cGVzID0gW1wianNvblwiLCBcInR4dFwiLCBcIm1kXCJdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIWFsbG93ZWRSZXNwb25zZVR5cGVzLmluY2x1ZGVzKHJlc3BvbnNlVHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5pbm5lckhUTUwgPSBcIkVycm9yOiBSZXNwb25zZSB0eXBlIFwiICsgcmVzcG9uc2VUeXBlICsgXCIgbm90IHN1cHBvcnRlZFwiO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSBsb3dlcmNhc2VMaW5lLmluY2x1ZGVzKFwic2hvdzogXCIpOlxuXHRcdFx0XHRcdFx0XHRzaG93ID0gbGluZS5yZXBsYWNlKC9zaG93OiAvaSwgXCJcIik7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXG5cdFx0XHRcdFx0XHRjYXNlIGxvd2VyY2FzZUxpbmUuaW5jbHVkZXMoXCJoZWFkZXI6IFwiKTpcblx0XHRcdFx0XHRcdFx0aGVhZGVyID0gSlNPTi5wYXJzZShsaW5lLnJlcGxhY2UoL2hlYWRlcjogL2ksIFwiXCIpKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cblx0XHRcdFx0XHRcdGNhc2UgbG93ZXJjYXNlTGluZS5pbmNsdWRlcyhcImJvZHk6IFwiKTpcblx0XHRcdFx0XHRcdFx0Ym9keSA9IGxpbmUucmVwbGFjZSgvYm9keTogL2ksIFwiXCIpO1xuXHRcdFx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0XHRcdFx0Y2FzZSBsb3dlcmNhc2VMaW5lLmluY2x1ZGVzKFwiZm9ybWF0OiBcIik6XG5cdFx0XHRcdFx0XHRcdGZvcm1hdCA9IGxpbmUucmVwbGFjZSgvZm9ybWF0OiAvaSwgXCJcIik7XG5cdFx0XHRcdFx0XHRcdGlmICghZm9ybWF0LmluY2x1ZGVzKFwie31cIikpIHtcblx0XHRcdFx0XHRcdFx0XHRlbC5pbm5lckhUTUwgPSBcIkVycm9yOiBVc2Uge30gdG8gc2hvdyByZXNwb25zZSBpbiB0aGUgZG9jdW1lbnQuXCI7XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoVVJMID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRlbC5pbm5lckhUTUwgPSBcIkVycm9yOiBVUkwgbm90IGZvdW5kXCI7XG5cdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRjb25zdCBmb3JtYXRTcGxpdCA9IGZvcm1hdC5zcGxpdChcInt9XCIpO1xuXHRcdFx0XHRcdGxldCByZXNwb25zZURhdGE6IGFueTtcblxuXHRcdFx0XHRcdGlmIChtZXRob2QgIT09IFwiR0VUXCIpIHtcblx0XHRcdFx0XHRcdHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlcXVlc3RVcmwoe3VybDogVVJMLCBtZXRob2QsIGhlYWRlciwgYm9keX0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXNwb25zZURhdGEgPSBhd2FpdCByZXF1ZXN0VXJsKHt1cmw6IFVSTCwgbWV0aG9kfSk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHJlc3BvbnNlVHlwZSAhPT0gXCJqc29uXCIpIHtcblx0XHRcdFx0XHRcdGVsLmlubmVySFRNTCA9IGZvcm1hdFNwbGl0WzBdICsgcmVzcG9uc2VEYXRhLnRleHQgKyBmb3JtYXRTcGxpdFsxXTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCFzaG93KSB7XG5cdFx0XHRcdFx0XHRlbC5pbm5lckhUTUwgPSBmb3JtYXRTcGxpdFswXSArIEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlRGF0YS5qc29uLCBudWxsKSArIGZvcm1hdFNwbGl0WzFdO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRsZXQgbmVzRGF0YTogYW55ID0gc2hvdy5pbmNsdWRlcyhcIi0+XCIpID8gbmVzdGVkVmFsdWUocmVzcG9uc2VEYXRhLCBzaG93KSA6IHJlc3BvbnNlRGF0YS5qc29uW3Nob3ddO1xuXG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIG5lc0RhdGEgPT09IFwib2JqZWN0XCIpIHtcblx0XHRcdFx0XHRcdFx0bmVzRGF0YSA9IEpTT04uc3RyaW5naWZ5KG5lc0RhdGEpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgbmVzRGF0YSA9PT0gXCJzdHJpbmdcIikge1xuXHRcdFx0XHRcdFx0XHRuZXNEYXRhID0gbmVzRGF0YS5yZXBsYWNlKC9cIi9nLCBcIlwiKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0ZWwuaW5uZXJIVE1MID0gZm9ybWF0U3BsaXRbMF0gKyBuZXNEYXRhICsgZm9ybWF0U3BsaXRbMV07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdGVsLmlubmVySFRNTCA9IFwiRXJyb3I6IFwiICsgZXJyb3IubWVzc2FnZTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlLm1lc3NhZ2UpO1xuXHRcdH1cblxuXHRcdHRoaXMucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihcImJlYW5TY2hlbWFcIiwgYXN5bmMgKHNvdXJjZSwgZWwsIGN0eCkgPT4ge1xuXHRcdFx0Ly8gXHU4RjZDXHU0RTQ5IGJlYW5TY2hlbWEgXHU2ODNDXHU1RjBGXG5cdFx0XHRsZXQgcGFyYW1ldGVyczogYW55ID0gbnVsbDtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdHBhcmFtZXRlcnMgPSBKU09OLnBhcnNlKHNvdXJjZSk7XG5cdFx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRcdGVsLmNyZWF0ZUVsKFwiaDNcIiwge3RleHQ6IFwiQlBNTiBwYXJhbWV0ZXJzIGludmFsaWQ6IFxcblwiICsgZS5tZXNzYWdlfSk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29uc3Qgc2I6IHN0cmluZ1tdID0gW1xuXHRcdFx0XHQnPHVsIGNsYXNzPVwiaGFzLWxpc3QtYnVsbGV0XCI+J1xuXHRcdFx0XTtcblxuXHRcdFx0ZnVuY3Rpb24gYWRkSXRlbShpZHg6IG51bWJlciwga2V5OiBzdHJpbmcsIHR5cGU6IHN0cmluZywgdGl0bGU6IHN0cmluZywgZGVzYzogc3RyaW5nKSB7XG5cdFx0XHRcdC8vIHNiLnB1c2goYCR7JyAgICAnLnJlcGVhdChsZXZlbCl9LSAke2tleX0gXFxgJHt2YWx1ZS52YWx1ZVR5cGV9XFxgYClcblx0XHRcdFx0Ly8gPGxpIGRhdGEtbGluZT1cIjBcIj48ZGl2IGNsYXNzPVwibGlzdC1idWxsZXRcIj48L2Rpdj5yZXFDb2RlIDxjb2RlPnN0cmluZzwvY29kZT4gPHN0cm9uZz5cdThCRjdcdTZDNDJcdTdGMTZcdTUzRjc8L3N0cm9uZz48L2xpPlxuXHRcdFx0XHQvLyBcdTVDMDYga2V5L3ZhbHVlL2Rlc2MgXHU1OTA0XHU3NDA2XHU2MjEwIGh0bWxFbmNvZGUgXHU2ODNDXHU1RjBGXG5cdFx0XHRcdGtleSA9IGh0bWxFbmNvZGUoa2V5KVxuXHRcdFx0XHR0eXBlID0gaHRtbEVuY29kZSh0eXBlKVxuXHRcdFx0XHR0aXRsZSA9IGh0bWxFbmNvZGUodGl0bGUpXG5cdFx0XHRcdGRlc2MgPSBodG1sRW5jb2RlKGRlc2MpXG5cblx0XHRcdFx0c2IucHVzaChgPGxpIGRhdGEtbGluZT1cIiR7aWR4fVwiPjxkaXYgY2xhc3M9XCJsaXN0LWJ1bGxldFwiPjwvZGl2PiR7a2V5fSA8Y29kZT4ke3R5cGV9PC9jb2RlPiA8c3Ryb25nPiR7dGl0bGV9PC9zdHJvbmc+JHtkZXNjfTwvbGk+YClcblx0XHRcdH1cblxuXHRcdFx0LyoqXG5cdFx0XHQgKiAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcblx0XHRcdCAqICAgICAgIFwicmVxQ29kZVwiOiB7XG5cdFx0XHQgKiAgICAgICAgIFwidGl0bGVcIjogXCJcdThCRjdcdTZDNDJcdTdGMTZcdTUzRjdcIixcblx0XHRcdCAqICAgICAgICAgXCJ2YWx1ZVR5cGVcIjogXCJzdHJpbmdcIixcblx0XHRcdCAqICAgICAgICAgXCJkZXNjXCI6IFwiXHU4QkY3XHU2QzQyXHU3RjE2XHU1M0Y3XHVGRjBDXHU2QkNGXHU0RTJBXHU4QkY3XHU2QzQyXHU5MEZEXHU4OTgxXHU0RTAwXHU0RTJBXHU1NTJGXHU0RTAwXHU3RjE2XHU1M0Y3XHVGRjBDXHU1NDBDXHU0RTAwXHU0RTJBXHU4QkY3XHU2QzQyXHU5MUNEXHU1OTBEXHU2M0QwXHU0RUE0XHVGRjBDXHU0RjdGXHU3NTI4XHU1NDBDXHU0RTAwXHU3RjE2XHU1M0Y3XCJcblx0XHRcdCAqICAgICAgIH0sXG5cdFx0XHQgKiAgICAgICAuLi5cblx0XHRcdCAqICAgICB9XG5cdFx0XHQgKiAgICAgPT5cblx0XHRcdCAqICAgICA8dWwgY2xhc3M9XCJoYXMtbGlzdC1idWxsZXRcIj5cblx0XHRcdCAqICAgICAtIHJlcUNvZGUgYHN0cmluZ2AgKipcdThCRjdcdTZDNDJcdTdGMTZcdTUzRjcsIFx1OEJGN1x1NkM0Mlx1N0YxNlx1NTNGN1x1RkYwQ1x1NkJDRlx1NEUyQVx1OEJGN1x1NkM0Mlx1OTBGRFx1ODk4MVx1NEUwMFx1NEUyQVx1NTUyRlx1NEUwMFx1N0YxNlx1NTNGN1x1RkYwQ1x1NTQwQ1x1NEUwMFx1NEUyQVx1OEJGN1x1NkM0Mlx1OTFDRFx1NTkwRFx1NjNEMFx1NEVBNFx1RkYwQ1x1NEY3Rlx1NzUyOFx1NTQwQ1x1NEUwMFx1N0YxNlx1NTNGNyoqXG5cdFx0XHQgKiBAcGFyYW0gbGV2ZWxcblx0XHRcdCAqIEBwYXJhbSBzZWNcblx0XHRcdCAqL1xuXHRcdFx0ZnVuY3Rpb24gYnVpbGRQcm9wKGxldmVsOiBudW1iZXIsIHNlYzogYW55KSB7XG5cdFx0XHRcdGlmIChzZWMudmFsdWVUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRcdE9iamVjdC5rZXlzKHNlYy5wcm9wZXJ0aWVzKS5mb3JFYWNoKChrZXksIGlkeCkgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc3QgdmFsdWUgPSBzZWMucHJvcGVydGllc1trZXldXG5cdFx0XHRcdFx0XHRpZiAodmFsdWUudmFsdWVUeXBlID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHRcdFx0XHRzYi5wdXNoKGA8bGkgZGF0YS1saW5lPVwiJHtpZHh9XCI+PGRpdiBjbGFzcz1cImxpc3QtYnVsbGV0XCI+PC9kaXY+PGRpdiBjbGFzcz1cImxpc3QtY29sbGFwc2UtaW5kaWNhdG9yIGNvbGxhcHNlLWluZGljYXRvciBjb2xsYXBzZS1pY29uXCI+PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gcmlnaHQtdHJpYW5nbGVcIj48cGF0aCBkPVwiTTMgOEwxMiAxN0wyMSA4XCI+PC9wYXRoPjwvc3ZnPjwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0JHtodG1sRW5jb2RlKGtleSl9PGNvZGU+b2JqZWN0PC9jb2RlPjx1bCBjbGFzcz1cImhhcy1saXN0LWJ1bGxldFwiPmApXG5cdFx0XHRcdFx0XHRcdC8vIHNiLnB1c2goYCR7JyAgICAnLnJlcGVhdChsZXZlbCl9LSAke2tleX0gXFxgJHt2YWx1ZS52YWx1ZVR5cGV9XFxgYClcblx0XHRcdFx0XHRcdFx0Ly8gYWRkSXRlbShpZHgsIGtleSwgdmFsdWUudmFsdWVUeXBlLCB2YWx1ZS50aXRsZSwgdmFsdWUuZGVzYylcblx0XHRcdFx0XHRcdFx0YnVpbGRQcm9wKGxldmVsICsgMSwgdmFsdWUpXG5cdFx0XHRcdFx0XHRcdHNiLnB1c2goYDwvdWw+PC9saT5gKVxuXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKHZhbHVlLnZhbHVlVHlwZSA9PT0gJ2FycmF5Jykge1xuXHRcdFx0XHRcdFx0XHRzYi5wdXNoKGA8bGkgZGF0YS1saW5lPVwiJHtpZHh9XCI+PGRpdiBjbGFzcz1cImxpc3QtYnVsbGV0XCI+PC9kaXY+PGRpdiBjbGFzcz1cImxpc3QtY29sbGFwc2UtaW5kaWNhdG9yIGNvbGxhcHNlLWluZGljYXRvciBjb2xsYXBzZS1pY29uXCI+PHN2ZyB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgd2lkdGg9XCIyNFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIGZpbGw9XCJub25lXCIgc3Ryb2tlPVwiY3VycmVudENvbG9yXCIgc3Ryb2tlLXdpZHRoPVwiMlwiIHN0cm9rZS1saW5lY2FwPVwicm91bmRcIiBzdHJva2UtbGluZWpvaW49XCJyb3VuZFwiIGNsYXNzPVwic3ZnLWljb24gcmlnaHQtdHJpYW5nbGVcIj48cGF0aCBkPVwiTTMgOEwxMiAxN0wyMSA4XCI+PC9wYXRoPjwvc3ZnPjwvZGl2PlxuXHRcdFx0XHRcdFx0XHRcdFx0JHtodG1sRW5jb2RlKGtleSl9PGNvZGU+YXJyYXk8L2NvZGU+PHVsIGNsYXNzPVwiaGFzLWxpc3QtYnVsbGV0XCI+YClcblx0XHRcdFx0XHRcdFx0Ly8gc2IucHVzaChgJHsnICAgICcucmVwZWF0KGxldmVsKX0tICR7a2V5fSBcXGAke3ZhbHVlLnZhbHVlVHlwZX1cXGBgKVxuXHRcdFx0XHRcdFx0XHQvLyBhZGRJdGVtKGlkeCwga2V5LCB2YWx1ZS52YWx1ZVR5cGUsIHZhbHVlLnRpdGxlLCB2YWx1ZS5kZXNjKVxuXHRcdFx0XHRcdFx0XHRidWlsZFByb3AobGV2ZWwgKyAxLCB2YWx1ZS5pdGVtcylcblx0XHRcdFx0XHRcdFx0c2IucHVzaChgPC91bD48L2xpPmApXG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIHNiLnB1c2goYCR7JyAgICAnLnJlcGVhdChsZXZlbCl9LSAke2tleX0gXFxgJHt2YWx1ZS52YWx1ZVR5cGV9XFxgICoqJHt2YWx1ZS50aXRsZX0uICR7dmFsdWUuZGVzY30qKmApXG5cdFx0XHRcdFx0XHRcdGFkZEl0ZW0oaWR4LCBrZXksIHZhbHVlLnZhbHVlVHlwZSwgdmFsdWUudGl0bGUsIHZhbHVlLmRlc2MpXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0fSBlbHNlIGlmIChzZWMudmFsdWVUeXBlID09PSAnYXJyYXknKSB7XG5cdFx0XHRcdFx0YnVpbGRQcm9wKGxldmVsLCBzZWMuaXRlbXMpXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gc2IucHVzaChgJHsnICAgICcucmVwZWF0KGxldmVsKX0tICR7c2VjLnRpdGxlfSBcXGAke3NlYy52YWx1ZVR5cGV9XFxgICoqJHtzZWMuZGVzY30qKmApXG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0YnVpbGRQcm9wKDAsIHBhcmFtZXRlcnMucm9vdClcblx0XHRcdHNiLnB1c2goJzwvdWw+Jylcblx0XHRcdGNvbnN0IGh0bWwgPSBzYi5qb2luKCdcXG4nKVxuXHRcdFx0ZWwuaW5uZXJIVE1MID0gaHRtbFxuXHRcdH0pO1xuXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAncmVzcG9uc2UtaW4tZG9jdW1lbnQnLFxuXHRcdFx0bmFtZTogJ1Bhc3RlIHJlc3BvbnNlIGluIGN1cnJlbnQgZG9jdW1lbnQnLFxuXHRcdFx0ZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvciwgdmlldzogTWFya2Rvd25WaWV3KSA9PiB7XG5cdFx0XHRcdHRvRG9jdW1lbnQodGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MsIGVkaXRvcik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuc2V0dGluZ3MuVVJMcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdFx0aWQ6ICdyZXNwb25zZS1pbi1kb2N1bWVudC0nICsgdGhpcy5zZXR0aW5ncy5VUkxzW2ldLk5hbWUsXG5cdFx0XHRcdG5hbWU6ICdSZXNwb25zZSBmb3IgYXBpOiAnICsgdGhpcy5zZXR0aW5ncy5VUkxzW2ldLk5hbWUsXG5cdFx0XHRcdGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yOiBFZGl0b3IsIHZpZXc6IE1hcmtkb3duVmlldykgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHJlYSA9IHRoaXMuc2V0dGluZ3MuVVJMc1tpXTtcblx0XHRcdFx0XHR0b0RvY3VtZW50KHRoaXMuYXBwLCByZWEsIGVkaXRvcik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgQVBSU2V0dGluZ3ModGhpcy5hcHAsIHRoaXMpKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XG5cdH1cblxuXHRhc3luYyBzYXZlU2V0dGluZ3MoKSB7XG5cdFx0YXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcblx0fVxufVxuXG5jbGFzcyBTaG93T3V0cHV0TW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBVUkw6IHN0cmluZywgTWV0aG9kUmVxdWVzdDogc3RyaW5nLCBEYXRhUmVxdWVzdDogc3RyaW5nLCBIZWFkZXJSZXF1ZXN0OiBzdHJpbmcsIERhdGFSZXNwb25zZTogc3RyaW5nKSB7XG5cdFx0c3VwZXIoYXBwKTtcblx0XHR0aGlzLnByb3BzID0ge1xuXHRcdFx0VVJMLFxuXHRcdFx0TWV0aG9kUmVxdWVzdCxcblx0XHRcdERhdGFSZXF1ZXN0LFxuXHRcdFx0SGVhZGVyUmVxdWVzdCxcblx0XHRcdERhdGFSZXNwb25zZSxcblx0XHR9O1xuXHR9XG5cblx0b25PcGVuKCkge1xuXHRcdGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcblx0XHRjb25zdCB7VVJMLCBNZXRob2RSZXF1ZXN0LCBEYXRhUmVxdWVzdCwgSGVhZGVyUmVxdWVzdCwgRGF0YVJlc3BvbnNlfSA9IHRoaXMucHJvcHM7XG5cdFx0Y29uc29sZS5sb2coSGVhZGVyUmVxdWVzdClcblxuXHRcdGlmIChNZXRob2RSZXF1ZXN0ID09PSBcIkdFVFwiKSB7XG5cdFx0XHRyZXF1ZXN0VXJsKHtcblx0XHRcdFx0dXJsOiBVUkwsXG5cdFx0XHRcdG1ldGhvZDogTWV0aG9kUmVxdWVzdCxcblx0XHRcdFx0aGVhZGVyczogSlNPTi5wYXJzZShIZWFkZXJSZXF1ZXN0KVxuXHRcdFx0fSlcblx0XHRcdFx0LnRoZW4oKGRhdGE6IEpTT04pID0+IHtcblx0XHRcdFx0XHRpZiAoRGF0YVJlc3BvbnNlICE9PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRjb25zdCBEYXRhUmVzcG9uc2VBcnJheSA9IERhdGFSZXNwb25zZS5zcGxpdChcIixcIik7XG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IERhdGFSZXNwb25zZUFycmF5Lmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChEYXRhUmVzcG9uc2VBcnJheVtpXS5pbmNsdWRlcyhcIi0+XCIpKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdiJywge3RleHQ6IERhdGFSZXNwb25zZUFycmF5W2ldICsgXCIgOiBcIiArIGAke0pTT04uc3RyaW5naWZ5KG5lc3RlZFZhbHVlKGRhdGEsIERhdGFSZXNwb25zZUFycmF5W2ldKSl9YH0pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnYicsIHt0ZXh0OiBEYXRhUmVzcG9uc2VBcnJheVtpXSArIFwiIDogXCIgKyBgJHtKU09OLnN0cmluZ2lmeShkYXRhLmpzb25bRGF0YVJlc3BvbnNlQXJyYXlbaV1dKX1gfSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y29udGVudEVsLmNyZWF0ZUVsKCdiJywge3RleHQ6IGAke0pTT04uc3RyaW5naWZ5KGRhdGEuanNvbil9YH0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSlcblx0XHRcdFx0LmNhdGNoKChlcnJvcjogRXJyb3IpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcblx0XHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2InLCB7dGV4dDogXCJFcnJvcjogXCIgKyBlcnJvci5tZXNzYWdlfSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXF1ZXN0VXJsKHtcblx0XHRcdFx0dXJsOiBVUkwsXG5cdFx0XHRcdG1ldGhvZDogTWV0aG9kUmVxdWVzdCxcblx0XHRcdFx0aGVhZGVyczogSlNPTi5wYXJzZShIZWFkZXJSZXF1ZXN0KSxcblx0XHRcdFx0Ym9keTogRGF0YVJlcXVlc3Rcblx0XHRcdH0pXG5cdFx0XHRcdC50aGVuKChkYXRhOiBKU09OKSA9PiB7XG5cdFx0XHRcdFx0aWYgKERhdGFSZXNwb25zZSAhPT0gXCJcIikge1xuXHRcdFx0XHRcdFx0Y29uc3QgRGF0YVJlc3BvbnNlQXJyYXkgPSBEYXRhUmVzcG9uc2Uuc3BsaXQoXCIsXCIpO1xuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBEYXRhUmVzcG9uc2VBcnJheS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2InLCB7dGV4dDogRGF0YVJlc3BvbnNlQXJyYXlbaV0gKyBcIiA6IFwiICsgYCR7SlNPTi5zdHJpbmdpZnkoZGF0YS5qc29uW0RhdGFSZXNwb25zZUFycmF5W2ldXSl9YH0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb250ZW50RWwuY3JlYXRlRWwoJ2InLCB7dGV4dDogYCR7SlNPTi5zdHJpbmdpZnkoZGF0YS5qc29uKX1gfSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KVxuXHRcdFx0XHQuY2F0Y2goKGVycm9yOiBFcnJvcikgPT4ge1xuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuXHRcdFx0XHRcdGNvbnRlbnRFbC5jcmVhdGVFbCgnYicsIHt0ZXh0OiBcIkVycm9yOiBcIiArIGVycm9yLm1lc3NhZ2V9KTtcblx0XHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0b25DbG9zZSgpIHtcblx0XHRjb25zdCB7Y29udGVudEVsfSA9IHRoaXM7XG5cdFx0Y29udGVudEVsLmVtcHR5KCk7XG5cdH1cbn1cblxuY2xhc3MgQVBSU2V0dGluZ3MgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cGx1Z2luOiBNYWluQVBJUjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNYWluQVBJUikge1xuXHRcdHN1cGVyKGFwcCwgcGx1Z2luKTtcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcblx0fVxuXG5cdGRpc3BsYXkoKTogdm9pZCB7XG5cdFx0Y29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXHRcdHRoaXMuZGlzcGxheUFkZGVkVVJMcyhjb250YWluZXJFbCk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdOYW1lJylcblx0XHRcdC5zZXREZXNjKCdOYW1lIG9mIHRoZSByZXF1ZXN0Jylcblx0XHRcdC5hZGRUZXh0KHRleHQgPT4gdGV4dFxuXHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ05hbWUnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuTmFtZSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdGlmICh2YWx1ZSAhPT0gXCJcIikge1xuXHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuTmFtZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSk7XG5cblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdVUkwnKVxuXHRcdFx0LnNldERlc2MoJ0VuZHBvaW50IHRvIGZldGNoIGRhdGEgZnJvbScpXG5cdFx0XHQuYWRkVGV4dCh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdVUkwnKVxuXHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuVVJMKVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuVVJMID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdSZXNwb25zZSBmb3JtYXQnKVxuXHRcdFx0LnNldERlc2MoXCJTZWxlY3QgdGhlIGRlc2lyZWQgcmVzcG9uc2UgZm9ybWF0OiBKU09OIChhcyBhIGNvZGUgYmxvY2spIG9yIFZhcmlhYmxlICh1c2luZyAnOjonKVwiKVxuXHRcdFx0LmFkZERyb3Bkb3duKGRyb3BEb3duID0+IHtcblx0XHRcdFx0ZHJvcERvd24uYWRkT3B0aW9uKFwianNvblwiLCBcIkpTT05cIik7XG5cdFx0XHRcdGRyb3BEb3duLmFkZE9wdGlvbihcInZhcmlhYmxlXCIsIFwiVmFyaWFibGVcIik7XG5cdFx0XHRcdGRyb3BEb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkZvcm1hdE91dClcblx0XHRcdFx0ZHJvcERvd24ub25DaGFuZ2UoYXN5bmMgdmFsdWUgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkZvcm1hdE91dCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxuXHRcdFx0LnNldE5hbWUoJ1JlcXVlc3QgbWV0aG9kJylcblx0XHRcdC5zZXREZXNjKFwiU2VsZWN0IHRoZSBkZXNpcmVkIHJlcXVlc3QgbWV0aG9kXCIpXG5cdFx0XHQuYWRkRHJvcGRvd24oZHJvcERvd24gPT4ge1xuXHRcdFx0XHRkcm9wRG93bi5hZGRPcHRpb24oXCJHRVRcIiwgXCJHRVRcIik7XG5cdFx0XHRcdGRyb3BEb3duLmFkZE9wdGlvbihcIlBPU1RcIiwgXCJQT1NUXCIpO1xuXHRcdFx0XHRkcm9wRG93bi5hZGRPcHRpb24oXCJQT1NUXCIsIFwiUFVUXCIpO1xuXHRcdFx0XHRkcm9wRG93bi5hZGRPcHRpb24oXCJERUxFVEVcIiwgXCJERUxFVEVcIik7XG5cdFx0XHRcdGRyb3BEb3duLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLk1ldGhvZFJlcXVlc3QpXG5cdFx0XHRcdGRyb3BEb3duLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5NZXRob2RSZXF1ZXN0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGF0YSB0byBzZW5kJylcblx0XHRcdC5zZXREZXNjKFwiRGF0YSB0byBzZW5kIGluIHRoZSByZXF1ZXN0XCIpXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcigne1wiZGF0YVwiOlwiZGF0YVwifScpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5EYXRhUmVxdWVzdClcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkRhdGFSZXF1ZXN0ID0gdmFsdWU7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdH0pKTtcblx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdC5zZXROYW1lKCdIZWFkZXJzJylcblx0XHRcdC5zZXREZXNjKFwiSGVhZGVycyB0byBzZW5kIGluIHRoZSByZXF1ZXN0XCIpXG5cdFx0XHQuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XG5cdFx0XHRcdC5zZXRQbGFjZWhvbGRlcigne1wiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwifScpXG5cdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5IZWFkZXJSZXF1ZXN0KVxuXHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuSGVhZGVyUmVxdWVzdCA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRGF0YSB0byBzaG93IGluIG1vZGFsJylcblx0XHRcdC5zZXREZXNjKFwiV3JpdGUgdGhlIG5hbWUgb2YgdGhlIHZhcmlhYmxlIHRvIHNob3cgaW4gdGhlIG1vZGFsIChzcGFjZSBieSBjb21tYSlcIilcblx0XHRcdC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdWYXJpYWJsZSBOYW1lJylcblx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLkRhdGFSZXNwb25zZSlcblx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLkRhdGFSZXNwb25zZSA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KSk7XG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbiA9PiB7XG5cdFx0XHRcdGJ1dHRvbi5zZXRDbGFzcygnbW9kLWN0YScpO1xuXHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dCgnQWRkIHRoaXMgQVBJUicpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IHtOYW1lfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXHRcdFx0XHRcdGlmIChOYW1lID09PSBcIlwiKSB7XG5cdFx0XHRcdFx0XHRuZXcgTm90aWNlKFwiTmFtZSBpcyBlbXB0eVwiKTtcblx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3Qge1xuXHRcdFx0XHRcdFx0VVJMLFxuXHRcdFx0XHRcdFx0Rm9ybWF0T3V0LFxuXHRcdFx0XHRcdFx0TWV0aG9kUmVxdWVzdCxcblx0XHRcdFx0XHRcdERhdGFSZXNwb25zZSxcblx0XHRcdFx0XHRcdERhdGFSZXF1ZXN0LFxuXHRcdFx0XHRcdFx0SGVhZGVyUmVxdWVzdFxuXHRcdFx0XHRcdH0gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0XHRcdFx0XHRjb25zdCB7VVJMc30gPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcblx0XHRcdFx0XHRVUkxzLnB1c2goe1xuXHRcdFx0XHRcdFx0J1VSTCc6IFVSTCxcblx0XHRcdFx0XHRcdCdOYW1lJzogTmFtZSxcblx0XHRcdFx0XHRcdCdGb3JtYXRPdXQnOiBGb3JtYXRPdXQsXG5cdFx0XHRcdFx0XHQnTWV0aG9kUmVxdWVzdCc6IE1ldGhvZFJlcXVlc3QsXG5cdFx0XHRcdFx0XHQnRGF0YVJlcXVlc3QnOiBEYXRhUmVxdWVzdCxcblx0XHRcdFx0XHRcdCdIZWFkZXJSZXF1ZXN0JzogSGVhZGVyUmVxdWVzdCxcblx0XHRcdFx0XHRcdCdEYXRhUmVzcG9uc2UnOiBEYXRhUmVzcG9uc2Vcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5hZGRDb21tYW5kKHtcblx0XHRcdFx0XHRcdGlkOiAncmVzcG9uc2UtaW4tZG9jdW1lbnQtJyArIE5hbWUsXG5cdFx0XHRcdFx0XHRuYW1lOiAnUmVzcG9uc2UgZm9yIGFwaTogJyArIE5hbWUsXG5cdFx0XHRcdFx0XHRlZGl0b3JDYWxsYmFjazogKGVkaXRvcjogRWRpdG9yLCB2aWV3OiBNYXJrZG93blZpZXcpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcmVhID0gVVJMc1tVUkxzLmxlbmd0aCAtIDFdO1xuXHRcdFx0XHRcdFx0XHR0b0RvY3VtZW50KHRoaXMuYXBwLCByZWEsIGVkaXRvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdH1cblxuXHRkaXNwbGF5QWRkZWRVUkxzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGNvbnN0IHtVUkxzfSA9IHRoaXMucGx1Z2luLnNldHRpbmdzO1xuXHRcdGlmIChVUkxzLmxlbmd0aCA+IDApIHtcblx0XHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdwJywge3RleHQ6ICdBZGRlZCBBUElzOid9KTtcblx0XHRcdGNvbnN0IHVybHNMaXN0ID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ3VsJyk7XG5cdFx0XHRVUkxzLmZvckVhY2goKHVybCkgPT4ge1xuXHRcdFx0XHRjb25zdCB1cmxJdGVtID0gdXJsc0xpc3QuY3JlYXRlRWwoJ2xpJyk7XG5cdFx0XHRcdHVybEl0ZW0uY3JlYXRlRWwoJ2NvZGUnLCB7dGV4dDogdXJsLk5hbWUgKyBcIiA6IFwifSk7XG5cdFx0XHRcdHVybEl0ZW0uY3JlYXRlRWwoJ2EnLCB7dGV4dDogdXJsLlVSTCwgaHJlZjogdXJsLlVSTH0pO1xuXHRcdFx0XHR1cmxJdGVtLmNyZWF0ZUVsKCdjb2RlJywge3RleHQ6IFwiIHx8IFwifSk7XG5cblx0XHRcdFx0Y29uc3QgcmVtb3ZlQnV0dG9uID0gdXJsSXRlbS5jcmVhdGVFbCgnYnV0dG9uJywge1xuXHRcdFx0XHRcdHRleHQ6ICdcdTI3NEMnLFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0cmVtb3ZlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGluZGV4ID0gVVJMcy5pbmRleE9mKHVybCk7XG5cdFx0XHRcdFx0VVJMcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBodG1sRW5jb2RlKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcge1xuXHRpZiAoIWlucHV0KSB7XG5cdFx0cmV0dXJuICcnXG5cdH1cblxuXHRyZXR1cm4gaW5wdXQucmVwbGFjZSgvWyY8PlwiJ10vZywgZnVuY3Rpb24gKG1hdGNoKSB7XG5cdFx0c3dpdGNoIChtYXRjaCkge1xuXHRcdFx0Y2FzZSAnJic6XG5cdFx0XHRcdHJldHVybiAnJmFtcDsnO1xuXHRcdFx0Y2FzZSAnPCc6XG5cdFx0XHRcdHJldHVybiAnJmx0Oyc7XG5cdFx0XHRjYXNlICc+Jzpcblx0XHRcdFx0cmV0dXJuICcmZ3Q7Jztcblx0XHRcdGNhc2UgJ1wiJzpcblx0XHRcdFx0cmV0dXJuICcmcXVvdDsnO1xuXHRcdFx0Y2FzZSBcIidcIjpcblx0XHRcdFx0cmV0dXJuICcmIzM5Oyc7IC8vIFx1NUJGOVx1NEU4RVx1NTM1NVx1NUYxNVx1NTNGN1x1RkYwQ1x1NEU1Rlx1NTNFRlx1NEVFNVx1OTAwOVx1NjJFOVx1NEY3Rlx1NzUyOCAmI3gyNztcblx0XHR9XG5cdH0pO1xufVxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLHNCQUF3RztBQWF4RyxJQUFNLG1CQUFxQztBQUFBLEVBQzFDLEtBQUs7QUFBQSxFQUNMLFdBQVc7QUFBQSxFQUNYLGVBQWU7QUFBQSxFQUNmLGFBQWE7QUFBQSxFQUNiLGVBQWU7QUFBQSxFQUNmLGNBQWM7QUFBQSxFQUNkLE1BQU0sQ0FBQztBQUFBLEVBQ1AsTUFBTTtBQUNQO0FBRUEsU0FBUyxZQUFZLE1BQVcsS0FBYTtBQUM1QyxRQUFNLFdBQXFCLElBQUksTUFBTSxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsS0FBSyxLQUFLLENBQUM7QUFDcEUsTUFBSSxRQUFhO0FBQ2pCLFdBQVMsSUFBWSxHQUFHLElBQUksU0FBUyxRQUFRLEtBQUs7QUFDakQsUUFBSSxNQUFNLEdBQUc7QUFDWixjQUFRLEtBQUssS0FBSyxTQUFTLENBQUMsQ0FBQztBQUFBLElBQzlCLE9BQU87QUFDTixjQUFRLE1BQU0sU0FBUyxDQUFDLENBQUM7QUFBQSxJQUMxQjtBQUFBLEVBQ0Q7QUFDQSxTQUFPO0FBQ1I7QUFFQSxTQUFTLFdBQVcsS0FB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
